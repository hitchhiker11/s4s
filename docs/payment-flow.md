# üí≥ –ü–æ—Ç–æ–∫ –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–æ–≤ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–æ–≤ –≤ Shop4Shoot –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –ø–æ —Å—Å—ã–ª–∫–∞–º –∏–∑ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–ª–∞–≤–Ω—ã–π UX –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ –†–æ–±–æ–∫–∞—Å—Å–µ.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- üìß **Email-—Å—Å—ã–ª–∫–∏** - —Å—Å—ã–ª–∫–∏ –≤–∏–¥–∞ `/cart/?order_id=123`
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —Å –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
- üí∞ **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã** - `/payment?order_id=123`
- üè¶ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –†–æ–±–æ–∫–∞—Å—Å–æ–π** - –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –∏ —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã

---

## üöÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ URL

```
Email link:       https://shop4shoot.com/cart/?order_id=318
                         ‚Üì (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç)
Payment page:     https://shop4shoot.com/payment?order_id=318
                         ‚Üì (—á–µ—Ä–µ–∑ 5 —Å–µ–∫ –∏–ª–∏ –ø–æ –∫–ª–∏–∫—É)
Robokassa:        https://auth.robokassa.ru/Merchant/Index.aspx?...
```

### 2. –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
frontend/src/pages/
‚îú‚îÄ‚îÄ cart.js              # –û–±—Ä–∞–±–æ—Ç–∫–∞ email-—Å—Å—ã–ª–æ–∫ + —Ä–µ–¥–∏—Ä–µ–∫—Ç
‚îú‚îÄ‚îÄ payment.js           # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã
‚îî‚îÄ‚îÄ test-payment.js      # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

frontend/src/lib/api/
‚îî‚îÄ‚îÄ bitrix.js           # API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
```

---

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ cart.js

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ order_id –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç
const { order_id } = router.query;

useEffect(() => {
  if (router.isReady && order_id) {
    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
    router.push(`/payment?order_id=${order_id}`);
    return;
  }
}, [router.isReady, order_id]);
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `order_id` –≤ URL
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/payment?order_id=XXX`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ—Ä–∑–∏–Ω–æ–π

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã (payment.js)

**–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ
- üé® –ö—Ä–∞—Å–∏–≤—ã–π UI —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- ‚è±Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
- üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–∞
- üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**
```javascript
// –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–∞–∑–∞
<PaymentCard>
  <OrderInfo>           // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
  <StatusBadge>         // –¶–≤–µ—Ç–Ω–æ–π –±–∞–¥–∂ —Å—Ç–∞—Ç—É—Å–∞
  <PaymentButton>       // –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã
  <CountdownText>       // –°—á–µ—Ç—á–∏–∫ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
</PaymentCard>
```

### 3. API —Ñ—É–Ω–∫—Ü–∏–∏ (bitrix.js)

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
export const getOrderStatus = async (orderId) => {
  const response = await bitrixApi.get('/order', { 
    params: { action: 'get_status', order_id: orderId } 
  });
  return response.data;
};

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã
export const getPaymentForm = async (orderId) => {
  const response = await bitrixApi.get('/order', { 
    params: { action: 'get_payment_form', order_id: orderId } 
  });
  return response.data;
};
```

---

## üîÑ Workflow –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç email —Å —Å—Å—ã–ª–∫–æ–π] --> B[–ö–ª–∏–∫ –ø–æ —Å—Å—ã–ª–∫–µ /cart/?order_id=123]
    B --> C[–ó–∞–≥—Ä—É–∑–∫–∞ cart.js]
    C --> D{–ï—Å—Ç—å order_id?}
    D -->|–î–∞| E[–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /payment?order_id=123]
    D -->|–ù–µ—Ç| F[–û–±—ã—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã]
    E --> G[–ó–∞–≥—Ä—É–∑–∫–∞ payment.js]
    G --> H[–ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ API]
    H --> I{–ó–∞–∫–∞–∑ –Ω–∞–π–¥–µ–Ω?}
    I -->|–ù–µ—Ç| J[–ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É]
    I -->|–î–∞| K{–ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω?}
    K -->|–î–∞| L[–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ]
    K -->|–ù–µ—Ç| M[–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ]
    M --> N[–ó–∞–ø—É—Å–∫ 5-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞]
    N --> O[–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –†–æ–±–æ–∫–∞—Å—Å—É]
    L --> P[–ö–Ω–æ–ø–∫–∞ '–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é']
```

---

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤

```javascript
const StatusBadge = styled.span`
  ${props => {
    switch (props.status) {
      case 'new':     return 'background: warning; color: warning;';
      case 'paid':    return 'background: success; color: success;';
      case 'canceled': return 'background: error; color: error;';
      case 'shipped': return 'background: info; color: info;';
    }
  }}
`;
```

### 2. –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã

- üéØ **–ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã** - –≥—Ä–∞–¥–∏–µ–Ω—Ç + –ø–æ–¥—ä–µ–º –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ
- ‚ö° **–ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Å–ø–∏–Ω–Ω–µ—Ä** - –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### 3. –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | UI —ç–ª–µ–º–µ–Ω—Ç—ã |
|-----------|----------|-------------|
| **Loading** | –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞ | –°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ |
| **Error** | –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏/–∑–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω | –ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞—à–∫–∞ —Å –æ—à–∏–±–∫–æ–π |
| **New Order** | –ù–æ–≤—ã–π –∑–∞–∫–∞–∑, —Ç—Ä–µ–±—É–µ—Ç –æ–ø–ª–∞—Ç—ã | –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã + —Ç–∞–π–º–µ—Ä |
| **Paid Order** | –ó–∞–∫–∞–∑ —É–∂–µ –æ–ø–ª–∞—á–µ–Ω | –ó–µ–ª–µ–Ω–∞—è –ø–ª–∞—à–∫–∞ —É—Å–ø–µ—Ö–∞ |

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ order_id –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

```javascript
// –í cart.js
useEffect(() => {
  if (router.isReady && order_id) {
    router.push(`/payment?order_id=${order_id}`);
    return;
  }
}, [router.isReady, order_id]);

// –í payment.js
useEffect(() => {
  if (router.isReady && !order_id) {
    router.push('/cart');  // –†–µ–¥–∏—Ä–µ–∫—Ç –µ—Å–ª–∏ –Ω–µ—Ç order_id
  }
}, [router.isReady, order_id]);
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–π–º–µ—Ä –æ–ø–ª–∞—Ç—ã

```javascript
useEffect(() => {
  if (orderData && !orderData.is_paid && !redirecting) {
    const timer = setInterval(() => {
      setCountdown((prev) => {
        if (prev <= 1) {
          clearInterval(timer);
          handlePayment();  // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–ø–ª–∞—Ç–µ
          return 0;
        }
        return prev - 1;
      });
    }, 1000);

    return () => clearInterval(timer);
  }
}, [orderData, redirecting]);
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º –æ–ø–ª–∞—Ç—ã

```javascript
const handlePayment = async () => {
  const response = await getPaymentForm(order_id);
  
  if (response.success && response.data.direct_payment_url) {
    // –ü—Ä—è–º–æ–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤ –†–æ–±–æ–∫–∞—Å—Å—É
    window.location.href = response.data.direct_payment_url;
  } else if (response.success && response.data.payment_form) {
    // –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
    const formContainer = document.createElement('div');
    formContainer.innerHTML = response.data.payment_form;
    document.body.appendChild(formContainer);
    
    const form = formContainer.querySelector('form');
    if (form) form.submit();
  }
};
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `/test-payment`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑ `/cart/?order_id=XXX`
- ‚úÖ –ü—Ä—è–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `/payment?order_id=XXX`
- ‚úÖ –í–≤–æ–¥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö ID –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã

### 2. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫
```
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ API
2. –ü–æ–ª—É—á–∏—Ç—å order_id –∏–∑ –æ—Ç–≤–µ—Ç–∞
3. –û—Ç–∫—Ä—ã—Ç—å /cart/?order_id={ID}
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /payment
5. –î–æ–∂–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –†–æ–±–æ–∫–∞—Å—Å—É
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –£–∂–µ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑
```
1. –û—Ç–∫—Ä—ã—Ç—å /payment?order_id={PAID_ORDER_ID}
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–Ω–æ–ø–∫–∏ "–û–ø–ª–∞—Ç–∏—Ç—å"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–Ω–æ–ø–∫–∏ "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–∞–∑
```
1. –û—Ç–∫—Ä—ã—Ç—å /payment?order_id=999999
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã
```

### 3. –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# Email-—Å—Å—ã–ª–∫–∏ (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º)
https://shop4shoot.com/cart/?order_id=318
https://shop4shoot.com/cart/?order_id=319

# –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É
https://shop4shoot.com/payment?order_id=318
https://shop4shoot.com/payment?order_id=319

# –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
https://shop4shoot.com/test-payment
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# API –±–∞–∑–æ–≤—ã–π URL
NEXT_PUBLIC_BITRIX_URL=https://shop4shoot.com/api

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–µ—Ä–∞ (–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ)
PAYMENT_COUNTDOWN_SECONDS=5
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –†–æ–±–æ–∫–∞—Å—Å—ã

–í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ `OrderNew`:
```php
// –õ–æ–≥–∏–Ω –º–∞–≥–∞–∑–∏–Ω–∞
'MerchantLogin' => 'shop4shoot'

// URL —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
'ResultUrl' => 'https://shop4shoot.com/payment-result'
```

### 3. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ –æ—Ç—Å—Ç—É–ø—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑:
```javascript
import { COLORS, SPACING, TYPOGRAPHY, mediaQueries } from '../styles/tokens';
```

---

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 1. –¢–∏–ø—ã –æ—à–∏–±–æ–∫

| –¢–∏–ø –æ—à–∏–±–∫–∏ | –ü—Ä–∏—á–∏–Ω–∞ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|------------|---------|-----------|
| **404** | –ó–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω | –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É + —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ—Ä–∑–∏–Ω—É |
| **API Error** | –ü—Ä–æ–±–ª–µ–º–∞ —Å –±—ç–∫–µ–Ω–¥–æ–º | Toast + –ø–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ |
| **Network Error** | –ü—Ä–æ–±–ª–µ–º–∞ —Å–µ—Ç–∏ | Toast + –∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| **Payment Error** | –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã | Toast + –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã |

### 2. Fallback –ø–æ–≤–µ–¥–µ–Ω–∏–µ

```javascript
// –ï—Å–ª–∏ –Ω–µ—Ç order_id - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –∫–æ—Ä–∑–∏–Ω—É
if (router.isReady && !order_id) {
  router.push('/cart');
}

// –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ API - –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –∏ –∫–Ω–æ–ø–∫—É –ø–æ–≤—Ç–æ—Ä–∞
if (error) {
  return <ErrorMessage>{error}</ErrorMessage>;
}
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```javascript
// –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–∞
console.log('Order loaded successfully:', orderData);

// –ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–ø–ª–∞—Ç–µ
console.log('Redirecting to payment:', paymentUrl);

// –û—à–∏–±–∫–∏
console.error('Payment error:', error);
```

### 2. –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

- üìà **Conversion Rate** - % –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –æ—Ç —Å—Å—ã–ª–∫–∏ –∫ –æ–ø–ª–∞—Ç–µ
- ‚è±Ô∏è **Time to Payment** - –≤—Ä–µ–º—è –æ—Ç –∫–ª–∏–∫–∞ –¥–æ –Ω–∞—á–∞–ª–∞ –æ–ø–ª–∞—Ç—ã
- üö´ **Error Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –≤ –ø–æ—Ç–æ–∫–µ
- üîÑ **Bounce Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–∞–∑–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–ª–∞—Ç—ã

---

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- üí¨ **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ —Å—Ç–∞—Ç—É—Å–µ –æ–ø–ª–∞—Ç—ã
- üì± **QR-–∫–æ–¥—ã** –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- üé® **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–ø–ª–∞—Ç—ã
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- ‚ö° **Preloading** –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
- üóÑÔ∏è **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤
- üîÑ **Retry logic** –¥–ª—è failed –∑–∞–ø—Ä–æ—Å–æ–≤
- üì± **PWA** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: Alexandr  
**Email**: support@shop4shoot.com  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: `/docs/orders-api.md`

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 2024-01-15*  
*–í–µ—Ä—Å–∏—è: 1.0* 