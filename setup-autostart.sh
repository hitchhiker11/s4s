#!/bin/bash

echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ PM2..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ PM2
if ! command -v pm2 &> /dev/null; then
    echo "‚ùå PM2 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    echo "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2: npm install -g pm2"
    exit 1
fi

echo "1Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º startup —Å–∫—Ä–∏–ø—Ç..."
pm2 startup

echo ""
echo "‚ö†Ô∏è  –í–ê–ñ–ù–û: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—ã—à–µ!"
echo "–û–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'sudo env PATH=...'"
echo ""
echo "–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –Ω–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è..."
read -p ""

echo "2Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã..."
./start-pm2.sh

echo "3Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞..."
pm2 save

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ü–µ—Å—Å—ã –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:"
echo "   - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã"
echo "   - –ó–∞–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞"
echo "   - –í—ã—Ö–æ–¥–µ –∏–∑ SSH —Å–µ—Å—Å–∏–∏"
echo ""
echo "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å: pm2 status" 